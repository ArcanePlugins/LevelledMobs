# LM 3's rules file is available at: https://github.com/lokka30/LevelledMobs/blob/master/src/main/resources/rules.yml

mob-groups:
  # This section has no changes.


biome-groups:
  # This section has no changes.

# Presets act as 'copy and pastes' for the rules file.
# Presets can only be specified at the base of the rule, i.e., not under an action or condition etc.
presets:    
  'no-level':
    actions:
      levelling:
        formula: 'none'
        # It is now impossible for mobs to be 'level 0', if a mob's level is calculated to be below 1, then LM will automatically
        # set the level to 1.
        # To make a mob 'not levelled', the levelling formula needs to be set to 'none'. See the 'no-level' preset for example usage.
      matched-actions: # Matched actions makes the rule also apply to babies/passengers regardless of any conditions they have.
        babies: true
        passengers: false
    once-processed:
      stop-processing: true # This makes the rules interpreter no longer check further rules once this has been reached and the conditions are true of course.
  
  'normal-difficulty':
    # I won't include easy/hard difficulties in this example file, it'll just clutter it.
    actions:
      levelling:
        formula: '%weighted-random%'
        # Levelling variance has been removed as this can be achieved in the new 'levelling formula' system - just use a placeholder
        # that generates random numbers.
        
        strategies:
          weighted-random:
            weightings:
              1-20: 5
              21-40: 4
              41-60: 3
              61-80: 2
              81-100: 1 # changing max level to 100. can't remember why we chose 25 but I don't really like that number
                        # for being a max level. More numbers also means smoother attribute transitions between each level.

      attribute-formulas:
        - id: 'adjust-max-health-multiplier'
          entities:
            exclusive-list: ['ENDERMAN', 'WITHER_SKELETON']
          attributes:
            inclusive-list: ['GENERIC_MAX_HEALTH']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 5.0)'
          boundary:
            min: 1.0

        - id: 'adjust-movement-speed-multiplier'
          entities:
            exclusive-list: ['ENDERMAN', 'CREEPER']
          attributes:
            inclusive-list: ['GENERIC_MOVEMENT_SPEED']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.15)'
          boundary:
            min: 1.0

        - id: 'adjust-armor-toughness-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['GENERIC_ARMOR_TOUGHNESS']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.15)'
          boundary:
            min: 1.0

        - id: 'adjust-attack-damage-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['GENERIC_ATTACK_DAMAGE']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 2.25)'
          boundary:
            min: 1.0

        - id: 'adjust-ranged-attack-damage-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['CUSTOM_RANGED_ATTACK_DAMAGE']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 2.0)'
          boundary:
            min: 1.0

        - id: 'adjust-creeper-blast-damage-multiplier'
          entities:
            inclusive-list: ['CREEPER']
          attributes:
            inclusive-list: ['CUSTOM_CREEPER_BLAST_DAMAGE']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 1.0)'
          boundary:
            min: 1.0

        - id: 'adjust-item-drop-multiplier'
          entities:
            exclusive-list: ['ENDER_DRAGON', 'WITHER']
          attributes:
            inclusive-list: ['CUSTOM_ITEM_DROP']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 3)'
          boundary:
            min: 1.0

        - id: 'adjust-xp-drop-multiplier'
          entities:
            exclusive-list: ['ENDER_DRAGON', 'WITHER']
          attributes:
            inclusive-list: ['CUSTOM_XP_DROP']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 5)'
          boundary:
            min: 1.0

        - id: 'adjust-armor-bonus-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['GENERIC_ARMOR_BONUS']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.2)'
          boundary:
            min: 1.0

        - id: 'adjust-knockback-resistance-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['GENERIC_KNOCKBACK_RESISTANCE']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.2)'
          boundary:
            min: 1.0

        - id: 'adjust-attack-knockback-multiplier'
          entities:
            exclusive-list: []
          attributes:
            inclusive-list: ['GENERIC_ATTACK_KNOCKBACK']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.25)'
          boundary:
            min: 1.0

        - id: 'adjust-zombie-spawn-reinforcements-multiplier'
          entities:
            inclusive-list: ['ZOMBIE', 'HUSK', 'DROWNED']
          attributes:
            inclusive-list: ['GENERIC_ZOMBIE_SPAWN_REINFORCEMENTS']
          set-multiplier-formula: '((%currentLevel% / %maxLevel%) * 0.25)'
          boundary:
            min: 1.0

# Rules are processed from top to bottom
# If a rule below another rule both modify the same value then the lower rule will override the upper one
rules:

  # Rules can be put under groups.
  # Groups can also be nested inside each other.
  # Groups allow for rules to be organised
  # and disabled all in one switch if required
  # Each rule within groups can still be enabled
  # or disabled but if the group is disabled then
  # that takes priority.
  - groupid: 'generic-levelled-mob-conditions':
    enabled: true
    rules:
      - id: 'no-levels-from-spawners'
        enabled: true
        conditions:
          spawn-reason:
            inclusive-list: ['SPAWNER']
        use-preset: 'no-level'

      - id: 'no-levels-from-certain-worlds'
        enabled: true
        conditions:
          world:
            inclusive-list: ['world_the_end']
        use-preset: 'no-level'

  - groupid: 'generic-levelled-mob-actions'
    enabled: true
    rules:
      - id: 'apply-level-and-attributes'
        enabled: true
        actions:     
          name-overrides:
#           '*': '%biome% %name%' # e.g. this will show 'Jungle Creeper'.
          nametags:
            format: '&8[%tiered%Lvl. %level%&r &8| &r%name%&r &8| %tiered%%current-health%&8/%tiered%%max-health% â™¥&8]' # This format is only used for showcase purposes. It's just easier to type
            visibility-duration: 1000
            visibility-method: ['TARGETED', 'ATTACKED'] # Removed 'TRACKING' by default.
          matched-settings:
            babies: true
            passengers: false
        use-presets: ['normal-difficulty'] # change the difficulty here

file:
  generated-with: 'v4.0.0-b999-SNAPSHOT'
  version: 3
